{% extends "base.html" %}

{% block sidebar %}
    {{ block.super }}  <!-- ê¸°ì¡´ base.htmlì˜ sidebar ë‚´ìš© ìœ ì§€ -->

    <h2>{{ project.title }}</h2>
    <p>{{ project.description }}</p>
    <p>ìƒì„± ë‚ ì§œ: {{ project.created_at }}</p>
    <p>ë§ˆì§€ë§‰ ìˆ˜ì •: {{ project.updated_at }}</p>

    <a href="{% url 'project-list' %}" class="btn btn-secondary">ëª©ë¡ìœ¼ë¡œ</a>
    <a href="{% url 'project-update' project.id %}" class="btn btn-warning">ìˆ˜ì •</a>
    <a href="{% url 'project-delete' project.id %}" class="btn btn-danger">ì‚­ì œ</a>
{% endblock %}

{% block content %}
    <!-- ë©”ì¸ ì½˜í…ì¸ : ê¸°ë³¸ì ìœ¼ë¡œ ë²„ì¸„ì–´íˆ¬ì–´ ì•± ë¡œë“œ -->
    <div id="main-content">
        <iframe id="app-frame" src="{% url 'virtual_tour:virtual_tour' project.id %}" width="100%" height="600px" frameborder="0"></iframe>
    </div>
    
    <div class="bottom-icons">
        <button onclick="loadApp('virtual_tour')">ğŸ  ë²„ì¸„ì–´íˆ¬ì–´</button>
        <button onclick="loadApp('3d_model')">ğŸ— 3D ëª¨ë¸</button>
        <button onclick="loadApp('image_list')">ğŸ–¼ ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸</button>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetch("{% url 'virtual_tour:first-folder-images' project.id %}")
            .then(response => response.json())
            .then(data => {
                console.log(data["folder_name"])
                console.log(data.folder_name)

                data.forEach(panorama => {

                    const panoramaItem = document.createElement("div");
                });

            })
            .catch(error => console.error("Error fetching panoramas:", error));

        });
        
        function loadApp(appType) {
            let url;
            if (appType === "virtual_tour") {
                url = "{% url 'virtual_tour:virtual_tour' project.id%}";
            } else if (appType === "3d_model") {
                url = "{% url 'virtual_tour:virtual_tour' project.id%}";
            } else if (appType === "image_list") {
                url = "{% url 'virtual_tour:virtual_tour' project.id%}";
            }
            document.getElementById("app-frame").src = url;
        }
        </script>
{% endblock %}




<!-- ë©”ì¸ ì½˜í…ì¸ : ê¸°ë³¸ì ìœ¼ë¡œ ë²„ì¸„ì–´íˆ¬ì–´ ì•± ë¡œë“œ 
<div id="main-content">
    <iframe id="app-frame" src="{% url 'virtual_tour' %}" width="100%" height="600px" frameborder="0"></iframe>
</div>

<div class="bottom-icons">
    <button onclick="loadApp('virtual_tour')">ğŸ  ë²„ì¸„ì–´íˆ¬ì–´</button>
    <button onclick="loadApp('3d_model')">ğŸ— 3D ëª¨ë¸</button>
    <button onclick="loadApp('image_list')">ğŸ–¼ ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸</button>
</div>

<script>
    function loadProjectDetail(projectId) {
        fetch(`/projects/${projectId}/detail/`)
        .then(response => response.text())
        .then(html => {
            document.getElementById('project-detail').innerHTML = html;
        })
        .catch(error => console.error('Error:', error));
    }

    function loadApp(appType) {
        let url;
        if (appType === 'virtual_tour') {
            url = "{% url 'virtual_tour' %}";
        } else if (appType === '3d_model') {
            url = "{% url '3d_model' %}";
        } else if (appType === 'image_list') {
            url = "{% url 'image_list' %}";
        }
        document.getElementById('app-frame').src = url;
    }
</script>
 -->
